<!-- These XML tags are added to Excel sheet at run-time by UDIMAGIC  -->
<XMLTAGS CELLREFERENCE="A1" FROMROW="5" xmlns:UDF="TallyUDF">
  <!-- Specifies that this (i.e Column as mentioned above) is the key field -->
  <COLUMNNAME.LIST>
    <COLUMNNAME>ID</COLUMNNAME>
    <COLUMNNAME>NAME</COLUMNNAME>
  </COLUMNNAME.LIST>
  <!-- Create VOUCHERTYPE Master -->
  <MASTER TYPE="VOUCHERTYPE">
    <COMPANYNAME FORMULA="=AR#[1]"/>
    <NAME.LIST TYPE="String">
      <NAME COLUMNREFERENCE="C"/>
    </NAME.LIST>
    <PARENT ALERT="=if(len(trim(B#))=0,&quot;&quot;,if(__MATCH(B#,VOUCHERTYPELIST),&quot;&quot;,&quot;Invalid VoucherType :  &quot; &amp; B#))" ALERTREFERENCE="B#" COLUMNREFERENCE="B"/>
    <ISDEEMEDPOSITIVE FORMULA="=if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),&quot;No&quot;,&quot;Yes&quot;)"/>
    <NUMBERINGMETHOD>Manual</NUMBERINGMETHOD>
  </MASTER>
  <!-- Create CURRENCY Master -->
  <MASTER TYPE="CURRENCY">
    <COMPANYNAME FORMULA="=AR#[1]"/>
    <ORIGINALNAME COLUMNREFERENCE="AM"/>
    <MAILINGNAME FORMULA="=AM# &amp; &quot; Curr&quot;"/>
    <DECIMALPLACES> 2</DECIMALPLACES>
  </MASTER>
  <!-- Create  Sales/Purchase Ledger Master -->
  <MASTER TYPE="LEDGER">
    <COMPANYNAME FORMULA="=AR#[1]"/>
    <NAME.LIST>
      <NAME FORMULA="=if(len(trim(AE#))&gt;0,AE#,if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;debit note&quot;),&quot;PURCHASE &quot;,&quot;SALES &quot;) &amp; (Y#+AA#+AC#) &amp; &quot;%&quot;)"/>
    </NAME.LIST>
    <PARENT FORMULA="=if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;debit note&quot;),&quot;Purchase Accounts&quot;,&quot;Sales Accounts&quot;)"/>
    <TAXTYPE>Others</TAXTYPE>
    <ISBILLWISEON>No</ISBILLWISEON>
    <ISCOSTCENTRESON>No</ISCOSTCENTRESON>
    <AFFECTSSTOCK FORMULA="=if(And(len(trim(M#))=0,len(trim(N#))=0),&quot;No&quot;,&quot;Yes&quot;)"/>
    <USEFORVAT>No</USEFORVAT>
    <GSTAPPLICABLE SKIP="=trim(AK#)=&quot;yes&quot;" FORMULA="=&quot;~[~ Applicable&quot;"/>
    <!-- Type of supply : Goods or Services -->
    <GSTTYPEOFSUPPLY SKIP="=trim(AK#)=&quot;yes&quot;" FORMULA="=if(And(len(trim(M#))=0,len(trim(N#))=0),&quot;Services&quot;,&quot;Goods&quot;)"/>
  </MASTER>
  <!-- Create Party LEDGER Masters -->
  <MASTER TYPE="LEDGER">
    <COMPANYNAME FORMULA="=AR#[1]"/>
    <NAME.LIST>
      <NAME COLUMNREFERENCE="H"/>
      <NAME COLUMNREFERENCE="I"/>
      <OLDNAME FORMULA="=if(len(trim(I#))=0,H#,I#)"/>
    </NAME.LIST>
    <PARENT FORMULA="=if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;debit note&quot;),&quot;Sundry Creditors&quot;,&quot;Sundry Debtors&quot;)"/>
    <ISCOSTCENTRESON>No</ISCOSTCENTRESON>
    <ADDITIONALNAME COLUMNREFERENCE="H"/>
    <ISBILLWISEON>Yes</ISBILLWISEON>
      <!-- GST fields for PARTY LEDGER -->
    <GSTREGISTRATIONTYPE SKIP="=trim(AK#)=&quot;yes&quot;" FORMULA="=if(len(trim(J#))=0,&quot;Unregistered&quot;,&quot;Regular&quot;)"/>
    <!-- GSTIN / UIN -->
    <PARTYGSTIN SKIP="=trim(AK#)=&quot;yes&quot;" FORMULA="=trim(J#)"/>
    <COUNTRYNAME FORMULA="=if(len(trim(L#))=0,&quot;India&quot;,L#)"/>
      <!-- 2017-09-14: STATENAME is converted to proper-case  -->
    <STATENAME ALERT="=if(len(trim(K#))=0,&quot;&quot;,if(__MATCH(K#,STATENAMELIST),&quot;&quot;,&quot;Invalid StateName:  &quot; &amp; K#))" ALERTREFERENCE="K#" FORMULA="=proper(trim(K#))"/>
    <LEDSTATENAME FORMULA="=proper(trim(K#))"/>
    <!-- Tally Prime 3.0 -->
    <LEDGSTREGDETAILS.LIST>
      <APPLICABLEFROM>20230401</APPLICABLEFROM>
      <GSTREGISTRATIONTYPE SKIP="=trim(AK#)=&quot;yes&quot;" FORMULA="=if(len(trim(J#))=0,&quot;Unregistered/Consumer&quot;,&quot;Regular&quot;)"/>
      <STATE FORMULA="=proper(trim(K#))"/>
      <PLACEOFSUPPLY FORMULA="=proper(trim(K#))"/>
      <GSTIN SKIP="=trim(AK#)=&quot;yes&quot;" FORMULA="=trim(J#)"/>
    </LEDGSTREGDETAILS.LIST>
    <!-- Tally Prime 3.0 -->
    <LEDMAILINGDETAILS.LIST>
      <APPLICABLEFROM>20230401</APPLICABLEFROM>
      <MAILINGNAME COLUMNREFERENCE="H"/>
      <STATE FORMULA="=proper(trim(K#))"/>
      <COUNTRY FORMULA="=if(len(trim(L#))=0,&quot;India&quot;,L#)"/>
    </LEDMAILINGDETAILS.LIST>
  </MASTER>
  <!-- Create Trade discount Master -->
  <MASTER TYPE="LEDGER">
    <COMPANYNAME FORMULA="=AR#[1]"/>
    <NAME.LIST>
      <NAME FORMULA="=if(len(trim(X#))=0,if(Round(W#,2)=0,&quot;&quot;,&quot;Discount&quot;),X#)"/>
    </NAME.LIST>
    <PARENT>Indirect Expenses</PARENT>
    <ISCOSTCENTRESON>No</ISCOSTCENTRESON>
    <AFFECTSSTOCK>No</AFFECTSSTOCK>
    <GSTAPPLICABLE FORMULA="=&quot;~[~ Not Applicable&quot;"/>
    <UDF:VATDEALERNATURE.LIST DESC="`VATDealerNature`" ISLIST="YES" TYPE="String" INDEX="10031">
      <UDF:VATDEALERNATURE DESC="`VATDealerNature`">Discount</UDF:VATDEALERNATURE>
    </UDF:VATDEALERNATURE.LIST>
  </MASTER>
  <!-- Create IGST TAX LEDGER Master -->
  <MASTER TYPE="LEDGER">
    <COMPANYNAME FORMULA="=AR#[1]"/>
    <NAME.LIST>
      <NAME FORMULA="=if(len(trim(AF#))&gt;0,AF#,if(Or(IsError(Round(Y#,2)),len(trim(Y#))=0,Y#=0),&quot;&quot;,&quot;IGST &quot; &amp; Y# &amp; &quot;%&quot;))"/>
    </NAME.LIST>
    <PARENT>Duties &amp; Taxes</PARENT>
    <ISCOSTCENTRESON>No</ISCOSTCENTRESON>
    <AFFECTSSTOCK>No</AFFECTSSTOCK>
    <GSTAPPLICABLE SKIP="=trim(AK#)=&quot;yes&quot;" FORMULA="=&quot;~[~ Applicable&quot;"/>
    <GSTDUTYHEAD SKIP="=trim(AK#)=&quot;yes&quot;">Integrated Tax</GSTDUTYHEAD>
    <TAXTYPE SKIP="=trim(AK#)=&quot;yes&quot;">GST</TAXTYPE>
      <!-- 
        2018-06-28 :Now TAXRATE is included in Tax Ledgers only
        Earlier: TAXRATE not included as it may create confusion 
      -->
    <RATEOFTAXCALCULATION COLUMNREFERENCE="Y"/>
  </MASTER>
  <!-- Create CGST TAX LEDGER Master -->
  <MASTER TYPE="LEDGER">
    <COMPANYNAME FORMULA="=AR#[1]"/>
    <NAME.LIST>
      <NAME FORMULA="=if(len(trim(AG#))&gt;0,AG#,if(Or(IsError(Round(AA#,2)),len(trim(AA#))=0,AA#=0),&quot;&quot;,&quot;CGST &quot; &amp; AA# &amp; &quot;%&quot;))"/>
    </NAME.LIST>
    <PARENT>Duties &amp; Taxes</PARENT>
    <ISCOSTCENTRESON>No</ISCOSTCENTRESON>
    <AFFECTSSTOCK>No</AFFECTSSTOCK>
    <GSTAPPLICABLE SKIP="=trim(AK#)=&quot;yes&quot;" FORMULA="=&quot;~[~ Applicable&quot;"/>
    <GSTDUTYHEAD SKIP="=trim(AK#)=&quot;yes&quot;">Central Tax</GSTDUTYHEAD>
    <TAXTYPE SKIP="=trim(AK#)=&quot;yes&quot;">GST</TAXTYPE>
      <!-- 
        2018-06-28 :Now TAXRATE is included in Tax Ledgers only
        Earlier: TAXRATE not included as it may create confusion 
      -->
    <RATEOFTAXCALCULATION COLUMNREFERENCE="AA"/>
  </MASTER>
  <!-- Create SGST TAX LEDGER Master -->
  <MASTER TYPE="LEDGER">
    <COMPANYNAME FORMULA="=AR#[1]"/>
    <NAME.LIST>
      <NAME FORMULA="=if(len(trim(AH#))&gt;0,AH#,if(Or(IsError(Round(AC#,2)),len(trim(AC#))=0,AC#=0),&quot;&quot;,&quot;SGST &quot; &amp; AC# &amp; &quot;%&quot;))"/>
    </NAME.LIST>
    <PARENT>Duties &amp; Taxes</PARENT>
    <ISCOSTCENTRESON>No</ISCOSTCENTRESON>
    <AFFECTSSTOCK>No</AFFECTSSTOCK>
    <GSTAPPLICABLE SKIP="=trim(AK#)=&quot;yes&quot;" FORMULA="=&quot;~[~ Applicable&quot;"/>
    <GSTDUTYHEAD SKIP="=trim(AK#)=&quot;yes&quot;">State Tax</GSTDUTYHEAD>
    <TAXTYPE SKIP="=trim(AK#)=&quot;yes&quot;">GST</TAXTYPE>
      <!-- 
        2018-06-28 :Now TAXRATE is included in Tax Ledgers only
        Earlier: TAXRATE not included as it may create confusion 
      -->
    <RATEOFTAXCALCULATION COLUMNREFERENCE="AC"/>
  </MASTER>
  <!-- Create a single LEDGER Master -->
  <!--MASTER TYPE="LEDGER" SINGLERECORD="Yes"-->
  <MASTER TYPE="LEDGER">
    <COMPANYNAME FORMULA="=AR#[1]"/>
    <NAME.LIST>
      <NAME>Round Off</NAME>
    </NAME.LIST>
    <PARENT>Indirect Expenses</PARENT>
    <ISCOSTCENTRESON>No</ISCOSTCENTRESON>
  </MASTER>
  <!-- Create a SINGLE UNIT Master -->
  <MASTER TYPE="UNIT" SINGLERECORD="Yes">
    <NAME>Nos</NAME>
    <ISSIMPLEUNIT>Yes</ISSIMPLEUNIT>
    <GSTREPUOM>NOS-NUMBERS</GSTREPUOM>
      <!-- Tally Prime 3.0 -->
    <REPORTINGUQCDETAILS.LIST>
      <APPLICABLEFROM>20230401</APPLICABLEFROM>
      <REPORTINGUQCNAME>NOS-NUMBERS</REPORTINGUQCNAME>
    </REPORTINGUQCDETAILS.LIST>
  </MASTER>
  <!-- Create UNIT Master -->
  <MASTER TYPE="UNIT">
    <COMPANYNAME FORMULA="=AR#[1]"/>
    <NAME COLUMNREFERENCE="P"/>
    <ISSIMPLEUNIT>Yes</ISSIMPLEUNIT>
    <GSTREPUOM SKIP="=Not(trim(P#)=&quot;nos&quot;)">NOS-NUMBERS</GSTREPUOM>
    <GSTREPUOM SKIP="=Not(trim(P#)=&quot;kgs&quot;)">KGS-KILOGRAMS</GSTREPUOM>
  </MASTER>
  <!-- Create STOCKITEM Masters -->
  <MASTER TYPE="STOCKITEM">
    <COMPANYNAME FORMULA="=AR#[1]"/>
    <OLDNAME FORMULA="=if(len(trim(N#))=0,M#,N#)"/>
    <!-- Create new item with Name or PartNo -->
    <NAME FORMULA="=if(len(trim(M#))=0,N#,M#)"/>
    <!-- SKIP if both Name and Part No are empty -->
    <ADDITIONALNAME SKIP="=Or(len(trim(N#))=0,len(trim(M#))=0)" COLUMNREFERENCE="N"/>
    <PARENT/>
    <BASEUNITS ALERT="=if(len(trim(P#))=0,&quot;UOM is empty. The default value 'Nos' is now used.&quot;,&quot;&quot;)" ALERTREFERENCE="P#" FORMULA="=if(len(trim(P#))=0,&quot;Nos&quot;,P#)"/>
    <!-- GST details -->
    <GSTAPPLICABLE SKIP="=trim(AK#)=&quot;yes&quot;" FORMULA="=&quot;~[~ Applicable&quot;"/>
    <!-- Type of supply -->
    <GSTTYPEOFSUPPLY SKIP="=trim(AK#)=&quot;yes&quot;">Goods</GSTTYPEOFSUPPLY>
    <GSTDETAILS.LIST SKIP="=trim(AK#)=&quot;yes&quot;">
      <APPLICABLEFROM>20170701</APPLICABLEFROM>
      <CALCULATIONTYPE>On Value</CALCULATIONTYPE>
        <!-- Tally Prime 3.0 -->
      <SRCOFGSTDETAILS>Specify Details Here</SRCOFGSTDETAILS>
      <HSNCODE COLUMNREFERENCE="O"/>
      <TAXABILITY FORMULA="=If(Round(Y#+AA#+AC#,2)&gt;0,&quot;Taxable&quot;,&quot;Exempt&quot;)"/>
      <STATEWISEDETAILS.LIST>
        <STATENAME>~[~ Any</STATENAME>
        <RATEDETAILS.LIST>
          <GSTRATEDUTYHEAD>Central Tax</GSTRATEDUTYHEAD>
          <GSTRATEVALUATIONTYPE>Based on Value</GSTRATEVALUATIONTYPE>
          <GSTRATE FORMULA="=If(Round(AA#,2)&gt;0,Round(AA#,2),If(Y#&gt;0,Round(Y#/2,2),0))"/>
        </RATEDETAILS.LIST>
        <RATEDETAILS.LIST>
          <GSTRATEDUTYHEAD>State Tax</GSTRATEDUTYHEAD>
          <GSTRATEVALUATIONTYPE>Based on Value</GSTRATEVALUATIONTYPE>
          <GSTRATE FORMULA="=If(Round(AC#,2)&gt;0,Round(AC#,2),If(Y#&gt;0,Round(Y#/2,2),0))"/>
        </RATEDETAILS.LIST>
        <RATEDETAILS.LIST>
          <GSTRATEDUTYHEAD>Integrated Tax</GSTRATEDUTYHEAD>
          <GSTRATEVALUATIONTYPE>Based on Value</GSTRATEVALUATIONTYPE>
          <GSTRATE FORMULA="=If(Round(Y#,2)&gt;0,Round(Y#,2),Round(AA#+AC#,2))"/>
        </RATEDETAILS.LIST>
        <RATEDETAILS.LIST>
          <GSTRATEDUTYHEAD>Cess</GSTRATEDUTYHEAD>
          <GSTRATEVALUATIONTYPE>Based on Value</GSTRATEVALUATIONTYPE>
            <!-- Hard coded -->
          <GSTRATE>0</GSTRATE>
        </RATEDETAILS.LIST>
      </STATEWISEDETAILS.LIST>
      <TEMPGSTDETAILSLABRATES.LIST>
      </TEMPGSTDETAILSLABRATES.LIST>
    </GSTDETAILS.LIST>
    <!-- Tally Prime 3.0 -->
    <HSNDETAILS.LIST>
      <APPLICABLEFROM>20230401</APPLICABLEFROM>
      <HSNCODE COLUMNREFERENCE="O"/>
      <SRCOFHSNDETAILS>Specify Details Here</SRCOFHSNDETAILS>
    </HSNDETAILS.LIST>
  </MASTER>
  <VOUCHER12>
    <!-- Tally Prime 3.0 -->
    <GSTREGISTRATION TAXTYPE="GST" COLUMNREFERENCE="AT"/>
    <VCHSTATUSTAXUNIT_NOTREQUIRED COLUMNREFERENCE="AS"/>
    <CMPGSTSTATE COLUMNREFERENCE="AS"/>
    <CMPGSTIN COLUMNREFERENCE="AU"/>
    <CMPGSTREGISTRATIONTYPE COLUMNREFERENCE="AV"/>
    <VCHGSTSTATUSISINCLUDED>Yes</VCHGSTSTATUSISINCLUDED>
    <VCHGSTSTATUSISUNCERTAIN>No</VCHGSTSTATUSISUNCERTAIN>
    <COUNTRYOFRESIDENCE FORMULA="=if(len(trim(L#))=0,&quot;India&quot;,L#)"/>

    <PLACEOFSUPPLY FORMULA="=proper(trim(K#))"/>
    <VCHENTRYMODE>Item Invoice</VCHENTRYMODE>
    <COMPANYNAME FORMULA="=AR#[1]"/>
    <GUID FORMULA="=+&quot;udi-HZ3K9T-&quot; &amp; A# &amp; &quot;-&quot; &amp; C# &amp; &quot;-&quot; &amp; E#"/>
    <DATE COLUMNREFERENCE="E"/>
    <EFFECTIVEDATE COLUMNREFERENCE="E"/>
    <VOUCHERTYPENAME COLUMNREFERENCE="C"/>
    <VOUCHERNUMBER COLUMNREFERENCE="D"/>
    <REFERENCE COLUMNREFERENCE="F"/>
    <NARRATION COLUMNREFERENCE="AI"/>
    <ISINVOICE FORMULA="=if(And(len(trim(M#))=0,len(trim(N#))=0),&quot;No&quot;,&quot;Yes&quot;)"/>
    <PERSISTEDVIEW FORMULA="=if(And(len(trim(M#))=0,len(trim(N#))=0),&quot;Accounting Voucher View&quot;,&quot;Invoice Voucher View&quot;)"/>
    <ISINVOICE COLUMNREFERENCE="AL"/>
    <PERSISTEDVIEW SKIP="=len(trim(AL#))=0" FORMULA="=if(trim(AL#)=&quot;Yes&quot;,&quot;Invoice Voucher View&quot;,&quot;Accounting Voucher View&quot;)"/>
    <!-- For Purchase -->
    <UDF:REFERENCEDATE.LIST DESC="`ReferenceDate`" ISLIST="YES" TYPE="Date">
      <UDF:REFERENCEDATE DESC="`ReferenceDate`" COLUMNREFERENCE="G"/>
    </UDF:REFERENCEDATE.LIST>
    <REFERENCEDATE COLUMNREFERENCE="G"/>
    <!-- GSTIN / UIN -->
    <PARTYGSTIN SKIP="=trim(AK#)=&quot;yes&quot;" FORMULA="=trim(J#)"/>
    <!-- For compatibility with Tally ERP 9 Release 6.1.1 - Cash Purchase entry -->
    <GSTREGISTRATIONTYPE SKIP="=trim(AK#)=&quot;yes&quot;" FORMULA="=if(len(trim(J#))=0,&quot;Unregistered&quot;,&quot;Regular&quot;)"/>
    <!-- 2017-09-14: STATENAME is converted to proper-case  -->
    <STATENAME FORMULA="=proper(trim(K#))"/>
    <!-- Party Name is checked in Column H first and then Column I -->
    <PARTYNAME FORMULA="=if(len(trim(H#))=0,I#,H#)"/>
    <PARTYLEDGERNAME FORMULA="=if(len(trim(H#))=0,I#,H#)"/>
    <BASICBASEPARTYNAME FORMULA="=if(len(trim(H#))=0,I#,H#)"/>
    <BASICBUYERNAME FORMULA="=if(len(trim(H#))=0,I#,H#)"/>
    <!-- Other GST details -->
    <VATPARTYTRANSRETURNNUMBER SKIP="=trim(AK#)=&quot;yes&quot;" COLUMNREFERENCE="F"/>
    <VATPARTYTRANSRETURNDATE SKIP="=trim(AK#)=&quot;yes&quot;" COLUMNREFERENCE="G"/>
    <GSTNATUREOFRETURN SKIP="=IsError(Match(trim(B#[1]),\123&quot;credit note&quot;,&quot;debit note&quot;\125,0))">01-Sales Return</GSTNATUREOFRETURN>
      <!-- Hard coded -->
    <URDORIGINALSALEVALUE SKIP="=IsError(Match(trim(B#[1]),\123&quot;credit note&quot;,&quot;debit note&quot;\125,0))">Lesser than or equal to 2.5 lakhs</URDORIGINALSALEVALUE>
      <!-- Party Ledger -->
    <LEDGERENTRIES.LIST ALTERNATETAGNAME="=if(And(len(trim(M#[1]))=0,len(trim(N#[1]))=0),&quot;ALLLEDGERENTRIES.LIST&quot;,&quot;&quot;)">
      <LEDGERNAME ALERT="=if(And(len(trim(I#))=0,len(trim(H#))=0),&quot;Party Ledger Name is empty&quot;,&quot;&quot;)" ALERTREFERENCE="H# and I#" FORMULA="=if(len(trim(I#))=0,H#,I#)"/>
      <ISDEEMEDPOSITIVE FORMULA="=if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),&quot;No&quot;,&quot;Yes&quot;)"/>
      <AMOUNT CURRENCY="=AM#" ROE="=AN#" CONVERSIONFACTOR="=AP#" FOREXAMOUNT="=Round({AQ#},2)" FORMULA="=Round({Round(U#,2)-Round(W#,2)+Round(Z#,2)+Round(AB#,2)+Round(AD#,2)},if(trim(AJ#)=&quot;yes&quot;,0,2))*if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),1,-1)"/>
      <BILLALLOCATIONS.LIST SKIP="=Len(trim(D#))=0">
        <NAME COLUMNREFERENCE="D"/>
        <BILLTYPE>New Ref</BILLTYPE>
        <AMOUNT CURRENCY="=AM#" ROE="=AN#" CONVERSIONFACTOR="=AP#" FOREXAMOUNT="=Round({AQ#},2)" FORMULA="=Round({Round(U#,2)-Round(W#,2)+Round(Z#,2)+Round(AB#,2)+Round(AD#,2)},if(trim(AJ#)=&quot;yes&quot;,0,2))*if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),1,-1)"/>
      </BILLALLOCATIONS.LIST>
    </LEDGERENTRIES.LIST>
    <!-- Sales/Purchase Ledger -->
    <LEDGERENTRIES.LIST GROUPBY="=if(Not(And(Len(trim(M#))=0,Len(trim(N#))=0,Round(U#,2)&lt;&gt;0)),&quot;&quot;,if(len(trim(AE#))=0,if(Round(Y#,2)=0,Round(AA#,2),Round(Y#,2)),trim(AE#)))" SCROLL="YES" SKIP="=Not(And(len(trim(M#))=0,len(trim(N#))=0))" ALTERNATETAGNAME="=if(And(len(trim(M#[1]))=0,len(trim(N#[1]))=0),&quot;ALLLEDGERENTRIES.LIST&quot;,&quot;&quot;)">
      <LEDGERNAME FORMULA="=if(len(trim(AE#))&gt;0,AE#,if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;debit note&quot;),&quot;PURCHASE &quot;,&quot;SALES &quot;) &amp; (Y#+AA#+AC#) &amp; &quot;%&quot;)"/>
      <!-- For Invoice Mode -->
      <ISDEEMEDPOSITIVE SKIP="=Not(Or(And(Len(trim(AL#[1]))&gt;0,trim(AL#[1])=&quot;Yes&quot;),And(Len(trim(AL#[1]))=0,Or(len(trim(M#[1]))&gt;0,len(trim(N#[1]))&gt;0))))" FORMULA="=if(Not(IsError(Match(trim(B#[1]),\123&quot;purchase&quot;,&quot;purchase order&quot;,&quot;receipt note&quot;,&quot;credit note&quot;\125,0))),&quot;Yes&quot;,&quot;No&quot;)"/>
      <!-- For Voucher Mode -->
      <ISDEEMEDPOSITIVE SKIP="=Or(And(Len(trim(AL#[1]))&gt;0,trim(AL#[1])=&quot;Yes&quot;),And(Len(trim(AL#[1]))=0,Or(len(trim(M#[1]))&gt;0,len(trim(N#[1]))&gt;0)))" FORMULA="=if({Round(U#,2)}*if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),-1,1)&lt;0,&quot;Yes&quot;,&quot;No&quot;)"/>
      <!-- For Invoice Mode -->
      <TEST SKIP="=Not(Or(And(Len(trim(AL#[1]))&gt;0,trim(AL#[1])=&quot;Yes&quot;),And(Len(trim(AL#[1]))=0,Or(len(trim(M#[1]))&gt;0,len(trim(N#[1]))&gt;0))))">ISINVOICEMODE=YES</TEST>
        <!-- For Voucher Mode -->
      <TEST SKIP="=Or(And(Len(trim(AL#[1]))&gt;0,trim(AL#[1])=&quot;Yes&quot;),And(Len(trim(AL#[1]))=0,Or(len(trim(M#[1]))&gt;0,len(trim(N#[1]))&gt;0)))">ISINVOICEMODE=NO</TEST>
      <AMOUNT CURRENCY="=AM#" ROE="=AN#" CONVERSIONFACTOR="=AP#" FOREXAMOUNT="=Round({AQ#},2)" FORMULA="={Round(U#,2)}*if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),-1,1)"/>
    </LEDGERENTRIES.LIST>
    <!-- Trade discount Ledger -->
    <LEDGERENTRIES.LIST SKIP="={Round(W#,2)}=0" ALTERNATETAGNAME="=if(And(len(trim(M#[1]))=0,len(trim(N#[1]))=0),&quot;ALLLEDGERENTRIES.LIST&quot;,&quot;&quot;)">
      <LEDGERNAME FORMULA="=if(len(trim(X#))=0,&quot;Discount&quot;,X#)"/>
      <!-- For Invoice Mode -->
      <ISDEEMEDPOSITIVE SKIP="=Not(Or(And(Len(trim(AL#[1]))&gt;0,trim(AL#[1])=&quot;Yes&quot;),And(Len(trim(AL#[1]))=0,Or(len(trim(M#[1]))&gt;0,len(trim(N#[1]))&gt;0))))" FORMULA="=if(Not(IsError(Match(trim(B#[1]),\123&quot;purchase&quot;,&quot;purchase order&quot;,&quot;receipt note&quot;,&quot;credit note&quot;\125,0))),&quot;Yes&quot;,&quot;No&quot;)"/>
      <!-- Trade Discount Amount will be always positive. Hence, we need to use the VchType -->
      <!-- For Voucher Mode -->
      <ISDEEMEDPOSITIVE SKIP="=Or(And(Len(trim(AL#[1]))&gt;0,trim(AL#[1])=&quot;Yes&quot;),And(Len(trim(AL#[1]))=0,Or(len(trim(M#[1]))&gt;0,len(trim(N#[1]))&gt;0)))" FORMULA="=if(Not(IsError(Match(trim(B#[1]),\123&quot;purchase&quot;,&quot;purchase order&quot;,&quot;receipt note&quot;,&quot;credit note&quot;\125,0))),&quot;No&quot;,&quot;Yes&quot;)"/>
      <AMOUNT CURRENCY="=AM#" ROE="=AN#" CONVERSIONFACTOR="=AP#" FORMULA="={Round(W#,2)}*if(Not(IsError(Match(trim(B#[1]),\123&quot;purchase&quot;,&quot;purchase order&quot;,&quot;receipt note&quot;,&quot;credit note&quot;\125,0))),1,-1)"/>
      <!-- Tally Prime 3.0 -->
      <APPROPRIATEFOR>GST</APPROPRIATEFOR>
      <GSTAPPROPRIATETO>Goods</GSTAPPROPRIATETO>
      <EXCISEALLOCTYPE>Based on Value</EXCISEALLOCTYPE>
    </LEDGERENTRIES.LIST>
    <!-- IGST Ledger -->
    <LEDGERENTRIES.LIST GROUPBY="=if(len(trim(AF#))=0,trim(Y#),trim(AF#))" SKIP="={Round(Z#,2)}=0" ALTERNATETAGNAME="=if(And(len(trim(M#[1]))=0,len(trim(N#[1]))=0),&quot;ALLLEDGERENTRIES.LIST&quot;,&quot;&quot;)">
      <LEDGERNAME FORMULA="=if(len(trim(AF#))&gt;0,AF#,if(Or(IsError(Round(Y#,2)),len(trim(Y#))=0,Y#=0),&quot;&quot;,&quot;IGST &quot; &amp; Y# &amp; &quot;%&quot;))"/>
      <ISDEEMEDPOSITIVE FORMULA="=if(Not(IsError(Match(trim(B#[1]),\123&quot;purchase&quot;,&quot;purchase order&quot;,&quot;receipt note&quot;,&quot;credit note&quot;\125,0))),&quot;Yes&quot;,&quot;No&quot;)"/>
      <AMOUNT CURRENCY="=AM#" ROE="=AN#" CONVERSIONFACTOR="=AP#" FORMULA="={Round(Z#,2)}*if(Not(IsError(Match(trim(B#[1]),\123&quot;purchase&quot;,&quot;purchase order&quot;,&quot;receipt note&quot;,&quot;credit note&quot;\125,0))),-1,1)"/>
    </LEDGERENTRIES.LIST>
    <!-- CGST Ledger -->
    <LEDGERENTRIES.LIST GROUPBY="=if(len(trim(AG#))=0,trim(AA#),trim(AG#))" SKIP="={Round(AB#,2)}=0" ALTERNATETAGNAME="=if(And(len(trim(M#[1]))=0,len(trim(N#[1]))=0),&quot;ALLLEDGERENTRIES.LIST&quot;,&quot;&quot;)">
      <LEDGERNAME FORMULA="=if(len(trim(AG#))&gt;0,AG#,if(Or(IsError(Round(AA#,2)),len(trim(AA#))=0,AA#=0),&quot;&quot;,&quot;CGST &quot; &amp; AA# &amp; &quot;%&quot;))"/>
      <ISDEEMEDPOSITIVE FORMULA="=if(Not(IsError(Match(trim(B#[1]),\123&quot;purchase&quot;,&quot;purchase order&quot;,&quot;receipt note&quot;,&quot;credit note&quot;\125,0))),&quot;Yes&quot;,&quot;No&quot;)"/>
      <AMOUNT CURRENCY="=AM#" ROE="=AN#" CONVERSIONFACTOR="=AP#" FORMULA="={Round(AB#,2)}*if(Not(IsError(Match(trim(B#[1]),\123&quot;purchase&quot;,&quot;purchase order&quot;,&quot;receipt note&quot;,&quot;credit note&quot;\125,0))),-1,1)"/>
    </LEDGERENTRIES.LIST>
    <!-- SGST Ledger -->
    <LEDGERENTRIES.LIST GROUPBY="=if(len(trim(AH#))=0,trim(AC#),trim(AH#))" SKIP="={Round(AD#,2)}=0" ALTERNATETAGNAME="=if(And(len(trim(M#[1]))=0,len(trim(N#[1]))=0),&quot;ALLLEDGERENTRIES.LIST&quot;,&quot;&quot;)">
      <LEDGERNAME FORMULA="=if(len(trim(AH#))&gt;0,AH#,if(Or(IsError(Round(AC#,2)),len(trim(AC#))=0,AC#=0),&quot;&quot;,&quot;SGST &quot; &amp; AC# &amp; &quot;%&quot;))"/>
      <ISDEEMEDPOSITIVE FORMULA="=if(Not(IsError(Match(trim(B#[1]),\123&quot;purchase&quot;,&quot;purchase order&quot;,&quot;receipt note&quot;,&quot;credit note&quot;\125,0))),&quot;Yes&quot;,&quot;No&quot;)"/>
      <AMOUNT CURRENCY="=AM#" ROE="=AN#" CONVERSIONFACTOR="=AP#" FORMULA="={Round(AD#,2)}*if(Not(IsError(Match(trim(B#[1]),\123&quot;purchase&quot;,&quot;purchase order&quot;,&quot;receipt note&quot;,&quot;credit note&quot;\125,0))),-1,1)"/>
    </LEDGERENTRIES.LIST>
    <!-- Round Off Ledger -->
    <LEDGERENTRIES.LIST SKIP="=Or(Not(trim(AJ#)=&quot;yes&quot;),Round(Round({Round(U#,2)-Round(W#,2)+Round(Z#,2)+Round(AB#,2)+Round(AD#,2)},0)-Round({Round(U#,2)-Round(W#,2)+Round(Z#,2)+Round(AB#,2)+Round(AD#,2)},2),2)=0)" ALTERNATETAGNAME="=if(And(len(trim(M#[1]))=0,len(trim(N#[1]))=0),&quot;ALLLEDGERENTRIES.LIST&quot;,&quot;&quot;)">
      <LEDGERNAME>Round Off</LEDGERNAME>
        <!-- 
          When the value for IsInvoiceMode is explicitly set to Yes 
          And(Len(trim(AL#[1]))&gt;0,trim(AL#[1])=&quot;Yes&quot;)

          When the value of IsInvoiceMode is deemed to be Yes 
          And(Len(trim(AL#[1]))=0,Or(len(trim(M#[1]))&gt;0,len(trim(N#[1]))&gt;0))
        -->
        <!-- For Invoice Mode -->
      <ISDEEMEDPOSITIVE SKIP="=Not(Or(And(Len(trim(AL#[1]))&gt;0,trim(AL#[1])=&quot;Yes&quot;),And(Len(trim(AL#[1]))=0,Or(len(trim(M#[1]))&gt;0,len(trim(N#[1]))&gt;0))))" FORMULA="=if(Not(IsError(Match(trim(B#[1]),\123&quot;purchase&quot;,&quot;purchase order&quot;,&quot;receipt note&quot;,&quot;credit note&quot;\125,0))),&quot;Yes&quot;,&quot;No&quot;)"/>
      <!-- For Voucher Mode -->
      <ISDEEMEDPOSITIVE SKIP="=Or(And(Len(trim(AL#[1]))&gt;0,trim(AL#[1])=&quot;Yes&quot;),And(Len(trim(AL#[1]))=0,Or(len(trim(M#[1]))&gt;0,len(trim(N#[1]))&gt;0)))" FORMULA="=if(Round(Round({Round(U#,2)-Round(W#,2)+Round(Z#,2)+Round(AB#,2)+Round(AD#,2)},0)-Round({Round(U#,2)-Round(W#,2)+Round(Z#,2)+Round(AB#,2)+Round(AD#,2)},2),2)*if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),-1,1)&gt;0,&quot;No&quot;,&quot;Yes&quot;)"/>
      <!-- For Invoice Mode -->
      <TEST SKIP="=Not(Or(And(Len(trim(AL#[1]))&gt;0,trim(AL#[1])=&quot;Yes&quot;),And(Len(trim(AL#[1]))=0,Or(len(trim(M#[1]))&gt;0,len(trim(N#[1]))&gt;0))))">ISINVOICEMODE=YES</TEST>
        <!-- For Voucher Mode -->
      <TEST SKIP="=Or(And(Len(trim(AL#[1]))&gt;0,trim(AL#[1])=&quot;Yes&quot;),And(Len(trim(AL#[1]))=0,Or(len(trim(M#[1]))&gt;0,len(trim(N#[1]))&gt;0)))">ISINVOICEMODE=NO</TEST>
      <AMOUNT CURRENCY="=AM#" ROE="=AN#" CONVERSIONFACTOR="=AP#" FORMULA="=Round(Round({Round(U#,2)-Round(W#,2)+Round(Z#,2)+Round(AB#,2)+Round(AD#,2)},0)-Round({Round(U#,2)-Round(W#,2)+Round(Z#,2)+Round(AB#,2)+Round(AD#,2)},2),2)*if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),-1,1)"/>
    </LEDGERENTRIES.LIST>
    <!-- StockItems -->
    <ALLINVENTORYENTRIES.LIST SCROLL="YES" SKIP="=And(len(trim(M#))=0,len(trim(N#))=0)">
      <STOCKITEMNAME FORMULA="=if(len(trim(N#))=0,M#,N#)"/>
      <ISDEEMEDPOSITIVE FORMULA="=if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),&quot;Yes&quot;,&quot;No&quot;)"/>
      <!--RATEOFMRP COLUMNREFERENCE="R"/-->
      <MRPRATE COLUMNREFERENCE="R"/>
      <RATE SKIP="=And(len(trim(AM#))&gt;0,len(trim(AN#))&gt;0)" COLUMNREFERENCE="S"/>
      <!-- Forex Rate (Not shown in Tally if Inclusive Tax is enabled for items) -->
      <RATE SKIP="=And(len(trim(AM#))=0,len(trim(AN#))=0)" FORMULA="=AM# &amp; AO# &amp; &quot; = &quot; &amp; Round(AN#*Round(AO#,2),2) &amp; &quot;/&quot; &amp; P#"/>
      <DISCOUNT COLUMNREFERENCE="T"/>
      <AMOUNT CURRENCY="=AM#" ROE="=AN#" CONVERSIONFACTOR="=AP#" FOREXAMOUNT="=AQ#" FORMULA="=Round(U#,2)*if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),-1,1)"/>
      <ACTUALQTY COLUMNREFERENCE="Q"/>
      <BILLEDQTY COLUMNREFERENCE="Q"/>
      <ACCOUNTINGALLOCATIONS.LIST>
        <LEDGERNAME FORMULA="=if(len(trim(AE#))&gt;0,AE#,if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;debit note&quot;),&quot;PURCHASE &quot;,&quot;SALES &quot;) &amp; (Y#+AA#+AC#) &amp; &quot;%&quot;)"/>
        <ISDEEMEDPOSITIVE FORMULA="=if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),&quot;Yes&quot;,&quot;No&quot;)"/>
        <AMOUNT CURRENCY="=AM#" ROE="=AN#" CONVERSIONFACTOR="=AP#" FOREXAMOUNT="=AQ#" FORMULA="=Round(U#,2)*if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),-1,1)"/>
      </ACCOUNTINGALLOCATIONS.LIST>
      <BATCHALLOCATIONS.LIST>
        <GODOWNNAME>Main Location</GODOWNNAME>
        <BATCHNAME>Primary Batch</BATCHNAME>
        <DESTINATIONGODOWNNAME>Main Location</DESTINATIONGODOWNNAME>
        <AMOUNT CURRENCY="=AM#" ROE="=AN#" CONVERSIONFACTOR="=AP#" FOREXAMOUNT="=AQ#" FORMULA="=Round(U#,2)*if(Or(lower(trim(B#[1]))=&quot;purchase&quot;,lower(trim(B#[1]))=&quot;credit note&quot;),-1,1)"/>
        <ACTUALQTY COLUMNREFERENCE="Q"/>
        <BILLEDQTY COLUMNREFERENCE="Q"/>
      </BATCHALLOCATIONS.LIST>
      <UDF:EIDISCOUNTRATE.LIST SKIP="=Round(V#,2)=0" DESC="`EI DiscountRate`" ISLIST="YES" TYPE="Number" INDEX="10001">
        <UDF:EIDISCOUNTRATE DESC="`EI DiscountRate`" COLUMNREFERENCE="V"/>
      </UDF:EIDISCOUNTRATE.LIST>
      <UDF:EIDISCOUNTAMT.LIST SKIP="=Round(W#,2)=0" DESC="`EI DiscountAmt`" ISLIST="YES" TYPE="Amount" INDEX="10003">
        <UDF:EIDISCOUNTAMT DESC="`EI DiscountAmt`" COLUMNREFERENCE="W"/>
      </UDF:EIDISCOUNTAMT.LIST>
    </ALLINVENTORYENTRIES.LIST>
  </VOUCHER12>
</XMLTAGS>

